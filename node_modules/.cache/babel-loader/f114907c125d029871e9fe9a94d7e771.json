{"ast":null,"code":"/**\n * Node.js Bar Module\n *\n * Drinker\n */\nvar drinker = exports;\n\nvar vm = require('vm');\n\nvar bar = require('../bar');\n/**\n * Drinker @constructor\n */\n\n\nfunction Drinker(file, content, _bar) {\n  var that = this;\n  /**\n   * Save file for future\n   */\n\n  this.file = file;\n  /**\n   * Hold array of localListeners\n   * remove then when drinker will leave bar\n   */\n\n  var localListeners = [];\n  /**\n   * Override `addListener` and `on`\n   * methods to log event listeners\n   */\n\n  function addListener(event, listener) {\n    localListeners.push({\n      event: event,\n      listener: listener\n    });\n    return _bar.pool.addListener(event, listener);\n  }\n\n  ;\n  this.pint = Object.create(_bar.pool, {\n    addListener: {\n      value: addListener\n    },\n    on: {\n      value: addListener\n    }\n  });\n  /**\n   * Attach Drinker to bar\n   */\n\n  this.bar = _bar;\n  /**\n   * Run script contents in new context\n   */\n\n  try {\n    vm.runInNewContext(content, bar.utils.saturate({\n      /**\n       * Tunnel drinker's require to global\n       */\n      require: function () {\n        var paths = module.paths,\n            result;\n        module.paths = require('module')._nodeModulePaths(file);\n        result = require.apply(null, arguments);\n        module.paths = paths;\n        return result;\n      },\n\n      /**\n       * Introduce drinker to bar\n       */\n      name: function (name) {\n        if (that.name) {\n          _bar.log('Can\\'t change name drinker: %s', that.name);\n\n          return;\n        }\n\n        that.name = name;\n      },\n\n      /**\n       * Hook & snap\n       */\n      hook: function (event, callback) {\n        that.pint.emit(event, callback);\n        that.pint.on(event, function (event) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          callback.apply(null, args);\n        });\n      },\n      snap: function (event) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        that.pint.emit.apply(that.pint, arguments);\n        that.pint.on(event, function (event, callback) {\n          callback.apply(null, args);\n        });\n      },\n\n      /**\n       * Wrap _bar.log\n       */\n      log: function () {\n        _bar.log.apply(_bar, arguments);\n      },\n\n      /**\n       * Expose process, setTimeout, setInterval, clearTimeout, clearInterval\n       */\n      process: process,\n      setTimeout: setTimeout,\n      setInterval: setInterval,\n      clearTimeout: clearTimeout,\n      clearInterval: clearInterval\n    }, this.pint), file);\n  } catch (e) {\n    var err = e;\n  }\n\n  ;\n  /**\n   * Give a unique initial name to drinker\n   * if he doesn't have one\n   */\n\n  this.name || (this.name = +new Date() + ':' + ~~(Math.random() * 1e9));\n  this.pint.on('leave.' + this.name, function () {\n    localListeners.forEach(function (pair) {\n      that.pint.removeListener(pair.event, pair.listener);\n    });\n  });\n\n  if (err) {\n    process.nextTick(function () {\n      _bar.log(err.toString());\n\n      _bar.leave(file);\n    });\n  }\n\n  this.calculateHash(content);\n}\n\n;\ndrinker.Drinker = Drinker;\n/**\n * Constructor wrapper\n */\n\nfunction create(file, content, options) {\n  return new Drinker(file, content, options);\n}\n\n;\ndrinker.create = create;\n/**\n * Calculate hash of content\n */\n\nfunction calculateHash(content) {\n  this.hash = bar.utils.sha1(content);\n}\n\n;\nDrinker.prototype.calculateHash = calculateHash;","map":{"version":3,"names":["drinker","exports","vm","require","bar","Drinker","file","content","_bar","that","localListeners","addListener","event","listener","push","pool","pint","Object","create","value","on","runInNewContext","utils","saturate","paths","module","result","_nodeModulePaths","apply","arguments","name","log","hook","callback","emit","args","Array","prototype","slice","call","snap","process","setTimeout","setInterval","clearTimeout","clearInterval","e","err","Date","Math","random","forEach","pair","removeListener","nextTick","toString","leave","calculateHash","options","hash","sha1"],"sources":["G:/anaconda/project/download files/last down/New folder/desktop/Samrat/protfolio/protfolio/node_modules/bar/lib/bar/drinker.js"],"sourcesContent":["/**\n * Node.js Bar Module\n *\n * Drinker\n */\n\nvar drinker = exports;\n\nvar vm = require('vm');\n\nvar bar = require('../bar');\n\n/**\n * Drinker @constructor\n */\nfunction Drinker(file, content, _bar) {\n  var that = this;\n\n  /**\n   * Save file for future\n   */\n  this.file = file;\n\n  /**\n   * Hold array of localListeners\n   * remove then when drinker will leave bar\n   */\n  var localListeners = [];\n\n  /**\n   * Override `addListener` and `on`\n   * methods to log event listeners\n   */\n  function addListener(event, listener) {\n    localListeners.push({\n      event: event,\n      listener: listener\n    });\n    return _bar.pool.addListener(event, listener);\n  };\n  this.pint = Object.create(_bar.pool, {\n    addListener: {\n      value: addListener\n    },\n    on: {\n      value: addListener\n    }\n  });\n\n  /**\n   * Attach Drinker to bar\n   */\n  this.bar = _bar;\n\n  /**\n   * Run script contents in new context\n   */\n  try {\n    vm.runInNewContext(content, bar.utils.saturate({\n      /**\n       * Tunnel drinker's require to global\n       */\n      require: function() {\n\n        var paths = module.paths,\n            result;\n\n        module.paths = require('module')._nodeModulePaths(file);\n        result = require.apply(null, arguments);\n        module.paths = paths;\n\n        return result;\n      },\n\n      /**\n       * Introduce drinker to bar\n       */\n      name: function(name) {\n        if (that.name) {\n          _bar.log('Can\\'t change name drinker: %s', that.name);\n          return;\n        }\n        that.name = name;\n      },\n\n      /**\n       * Hook & snap\n       */\n      hook: function(event, callback) {\n        that.pint.emit(event, callback);\n        that.pint.on(event, function(event) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          callback.apply(null, args);\n        });\n      },\n\n      snap: function(event) {\n        var args = Array.prototype.slice.call(arguments, 1);\n\n        that.pint.emit.apply(that.pint, arguments);\n        that.pint.on(event, function(event, callback) {\n          callback.apply(null, args);\n        });\n      },\n\n      /**\n       * Wrap _bar.log\n       */\n      log: function() {\n        _bar.log.apply(_bar, arguments);\n      },\n\n      /**\n       * Expose process, setTimeout, setInterval, clearTimeout, clearInterval\n       */\n      process: process,\n      setTimeout: setTimeout,\n      setInterval: setInterval,\n      clearTimeout: clearTimeout,\n      clearInterval: clearInterval\n    }, this.pint), file);\n  } catch (e) {\n    var err = e;\n  };\n\n  /**\n   * Give a unique initial name to drinker\n   * if he doesn't have one\n   */\n  this.name || (this.name = +new Date + ':' + ~~(Math.random() * 1e9));\n\n  this.pint.on('leave.' + this.name, function() {\n    localListeners.forEach(function(pair) {\n      that.pint.removeListener(pair.event, pair.listener);\n    });\n  });\n\n  if (err) {\n    process.nextTick(function() {\n      _bar.log(err.toString());\n      _bar.leave(file);\n    });\n  }\n\n  this.calculateHash(content);\n};\ndrinker.Drinker = Drinker;\n\n/**\n * Constructor wrapper\n */\nfunction create(file, content, options) {\n  return new Drinker(file, content, options);\n};\ndrinker.create = create;\n\n/**\n * Calculate hash of content\n */\nfunction calculateHash(content) {\n  this.hash = bar.utils.sha1(content);\n};\nDrinker.prototype.calculateHash = calculateHash;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}